{% extends 'bootstrapTemplate/base.html' %}
{% load static %}

{% block content %}
<!--**********************************
    Content body start
***********************************-->
<div class="content-body">

    <div class="row page-titles mx-0">
        <div class="col p-md-0">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0)">Dashboard</a></li>
                <li class="breadcrumb-item active"><a href="javascript:void(0)">Home</a></li>
            </ol>
        </div>
    </div>
    <!-- row -->

    <div class="container-fluid">
        <!-- End Row -->
        <div class="row">
            <div class="col-12 m-b-30">
                <h4 class="d-inline">Weekly Schedule</h4>
                <p class="text-muted">Your weekly todo</p>

                <div class="row">

                    <!-- *********MONDAY********* -->

                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2>{{ week.mon }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.mon }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">MONDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="w-100 pl-3 pr-3 pt-3" style="overflow-y: auto; height: 280px;">
                                <table class="table" id="todo-table-mon">
                                    <tbody>
                                    {% include 'todo/monday_todo_list.html' %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer">
                                <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary js-create-todo-mon" data-id="mon">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                            </div>
                        </div>
                        <div class="modal fade" id="modal-todo-mon">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- End MONDAY -->

                    <!-- ********* TUESDAY ********* -->
                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2>{{ week.tue }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.tue }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">TUESDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="w-100 pl-3 pr-3 pt-3" style="overflow-y: auto; height: 280px;">
                                <table class="table" id="todo-table-tue">
                                    <tbody>
                                    {% include 'todo/tuesday_todo_list.html' %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer">
                                <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary js-create-todo-tue">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                            </div>
                        </div>
                        <div class="modal fade" id="modal-todo-tue">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- End TUESDAY -->

                    <!-- ********* WEDNESDAY ********* -->
                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2>{{ week.wed }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.wed }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">WEDNESDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="w-100 pl-3 pr-3 pt-3" style="overflow-y: auto; height: 280px;">
                                <table class="table" id="todo-table-wed">
                                    <tbody>
                                    {% include 'todo/wednesday_todo_list.html' %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer">
                                <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary js-create-todo-wed">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                            </div>
                        </div>
                        <div class="modal fade" id="modal-todo-wed">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- End WEDNESDAY -->

                    <!-- ********* THURSDAY ********* -->
                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2>{{ week.thu }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.thu }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">THURSDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="w-100 pl-3 pr-3 pt-3" style="overflow-y: auto; height: 280px;">
                                <table class="table" id="todo-table-thu">
                                    <tbody>
                                    {% include 'todo/thursday_todo_list.html' %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="card-footer">
                                <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary js-create-todo-thu">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                            </div>
                        </div>
                        <div class="modal fade" id="modal-todo-thu">
                            <div class="modal-dialog">
                                <div class="modal-content">

                                </div>
                            </div>
                        </div>
                    <!-- End THURSDAY -->

                    <!-- ********* FRIDAY ********* -->
                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2>{{ week.fri }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.fri }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">FRIDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="card-body" style="overflow-y: auto; height: 280px;">
                                {% if day == week.fri %}
                                <form method="POST" action="{% url 'todo_detail' todo.id %}">
                                    {% csrf_token %}
                                    {% for field in form %}
                                    {% if field.field.is_checkbox %}
                                    <div class="form-group form-check">
                                        {{ field }}
                                        {{ field.label_tag }}
                                    </div>
                                    {% else %}
                                    <div class="form-group">
                                        {{ field }}
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                    <button type="submit" class="btn btn-primary">Save change</button>
                                </form>
                                {% else %}
                                {% for todo in todo_list.4 %}
                                <div class="card-content mb-3">
                                    <a href="{% url 'todo_detail' todo.id %}"><span class="btn-icon-left"><i class="fa fa-square-o"></i></span>{{ todo.title }}</a>
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>
                            <div class="card-footer">
                                <div class="bootstrap-modal">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary" data-toggle="modal" data-target="#basicModal5">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="basicModal5" style="display: none;" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Add Todo</h5>
                                                    <button type="button" class="close" data-dismiss="modal"><span>×</span>
                                                    </button>
                                                </div>

                                                <form method="POST" action="{% url 'create_todo' day='fri' %}">
                                                    {% csrf_token %}
                                                    <div class="modal-body ml-4 mr-4 mt-3">
                                                        <div class=" mt-2">
                                                            <input type="text" class="form-control input-default" id="title" name="title" placeholder="Title">
                                                        </div>
                                                        <div class="form-group mt-3">
                                                            <textarea class="form-control" id="memo" rows="6" name="memo"placeholder="memo"></textarea>
                                                        </div>
                                                        <div class="form-group form-check mt-4">
                                                            <input type="checkbox" class="form-check-input" id="important" name="important">
                                                            <label class="form-check-label" for="important">important</label>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-primary">Submit</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End FRIDAY -->

                    <!-- ********* SATURDAY ********* -->
                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2 class="text-info">{{ week.sat }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.sat }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">SATURDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="card-body" style="overflow-y: auto; height: 280px;">
                                {% if day == week.sat %}
                                <form method="POST" action="{% url 'todo_detail' todo.id %}">
                                    {% csrf_token %}
                                    {% for field in form %}
                                    {% if field.field.is_checkbox %}
                                    <div class="form-group form-check">
                                        {{ field }}
                                        {{ field.label_tag }}
                                    </div>
                                    {% else %}
                                    <div class="form-group">
                                        {{ field }}
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                    <button type="submit" class="btn btn-primary">Save change</button>
                                </form>
                                {% else %}
                                {% for todo in todo_list.5 %}
                                <div class="card-content mb-3">
                                    <a href="{% url 'todo_detail' todo.id %}"><span class="btn-icon-left"><i class="fa fa-square-o"></i></span>{{ todo.title }}</a>
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>
                            <div class="card-footer">
                                <div class="bootstrap-modal">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary" data-toggle="modal" data-target="#basicModal6">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="basicModal6" style="display: none;" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Add Todo</h5>
                                                    <button type="button" class="close" data-dismiss="modal"><span>×</span>
                                                    </button>
                                                </div>

                                                <form method="POST" action="{% url 'create_todo' day='sat' %}">
                                                    {% csrf_token %}
                                                    <div class="modal-body ml-4 mr-4 mt-3">
                                                        <div class=" mt-2">
                                                            <input type="text" class="form-control input-default" id="title" name="title" placeholder="Title">
                                                        </div>
                                                        <div class="form-group mt-3">
                                                            <textarea class="form-control" id="memo" rows="6" name="memo"placeholder="memo"></textarea>
                                                        </div>
                                                        <div class="form-group form-check mt-4">
                                                            <input type="checkbox" class="form-check-input" id="important" name="important">
                                                            <label class="form-check-label" for="important">important</label>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-primary">Submit</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End SATURDAY -->

                    <!-- ********* SUNDAY ********* -->

                    <div class="col-md-6 col-lg-3">
                        <div class="card">
                            <div class="card-header bg-white">
                                <table>
                                    <tr>
                                        <td rowspan="2" class="card-title text-center pr-3"><h2 class="text-danger">{{ week.sun }}</h2></td>
                                        <td class="font-weight-semi-bold">{{ month.sun }}</td>
                                        <td rowspan="2" class="font-weight-semi-bold text-right w-100"><h5 class="text-muted">SUNDAY</h5></td>
                                    </tr>
                                    <tr>
                                        <td class="font-weight-normal">2020</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="card-body" style="overflow-y: auto; height: 280px;">
                                {% if day == week.sun %}
                                <form method="POST" action="{% url 'todo_detail' todo.id %}">
                                    {% csrf_token %}
                                    {% for field in form %}
                                    {% if field.field.is_checkbox %}
                                    <div class="form-group form-check">
                                        {{ field }}
                                        {{ field.label_tag }}
                                    </div>
                                    {% else %}
                                    <div class="form-group">
                                        {{ field }}
                                    </div>
                                    {% endif %}
                                    {% endfor %}
                                    <button type="submit" class="btn btn-primary">Save change</button>
                                </form>
                                {% else %}
                                {% for todo in todo_list.6 %}
                                <div class="card-content mb-3">
                                    <a href="{% url 'todo_detail' todo.id %}"><span class="btn-icon-left"><i class="fa fa-square-o"></i></span>{{ todo.title }}</a>
                                </div>
                                {% endfor %}
                                {% endif %}
                            </div>
                            <div class="card-footer">
                                <div class="bootstrap-modal">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn mb-1 ml-5 btn-rounded btn-outline-secondary" data-toggle="modal" data-target="#basicModal7">Add Todo<span class="btn-icon-right"><i class="fa fa-plus"></i></span></button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="basicModal7" style="display: none;" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Add Todo</h5>
                                                    <button type="button" class="close" data-dismiss="modal"><span>×</span>
                                                    </button>
                                                </div>

                                                <form method="POST" action="{% url 'create_todo' day='sun' %}">
                                                    {% csrf_token %}
                                                    <div class="modal-body ml-4 mr-4 mt-3">
                                                        <div class=" mt-2">
                                                            <input type="text" class="form-control input-default" id="title" name="title" placeholder="Title">
                                                        </div>
                                                        <div class="form-group mt-3">
                                                            <textarea class="form-control" id="memo" rows="6" name="memo"placeholder="memo"></textarea>
                                                        </div>
                                                        <div class="form-group form-check mt-4">
                                                            <input type="checkbox" class="form-check-input" id="important" name="important">
                                                            <label class="form-check-label" for="important">important</label>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-primary">Submit</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end SUNDAY -->
                </div>
            </div>
        </div>

    </div>
    <!-- #/ container -->
</div>

<!--**********************************
    Content body end
***********************************-->


<!--**********************************
     javascript start
***********************************-->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
    // 월요일
    $(".js-create-todo-mon").click(function () {
        $.ajax({
            url: "{% url 'todo_create' day='mon' %}",
            type: 'get',
            dataType: 'json',
            beforeSend: function () {
                $("#modal-todo-mon").modal("show");
            },
            success: function (data) {
                $("#modal-todo-mon .modal-content").html(data.html_form);
            }
        });
    });
    $("#modal-todo-mon").on("submit", ".js-todo-create-form", function () {

        var form = $(this);

        $.ajax({
            url: form.attr("action"),
            data: form.serialize(),
            type: form.attr("method"),
            dataType: 'json',
            success: function (data) {
                if (data.form_is_valid) {
                    $("#todo-table-mon tbody").html(data.html_todo_list);
                    $("#modal-todo-mon").modal("hide");
                }
                else {
                    alert('data is not valid')
                    $("#modal-todo-mon .modal-content").html(data.html_form);
                }
            }
        });
        return false;
    });

    // 화요일
     $(".js-create-todo-tue").click(function () {
        $.ajax({
            url: "{% url 'todo_create' day='tue' %}",
            type: 'get',
            dataType: 'json',
            beforeSend: function () {
                $("#modal-todo-tue").modal("show");
            },
            success: function (data) {
                $("#modal-todo-tue .modal-content").html(data.html_form);
            }
        });
    });
    $("#modal-todo-tue").on("submit", ".js-todo-create-form", function () {

        var form = $(this);

        $.ajax({
            url: form.attr("action"),
            data: form.serialize(),
            type: form.attr("method"),
            dataType: 'json',
            success: function (data) {
                if (data.form_is_valid) {
                    $("#todo-table-tue tbody").html(data.html_todo_list);
                    $("#modal-todo-tue").modal("hide");
                }
                else {
                    alert('data is not valid')
                    $("#modal-todo-tue .modal-content").html(data.html_form);
                }
            }
        });
        return false;
    });

    // 수요일
     $(".js-create-todo-wed").click(function () {
        $.ajax({
            url: "{% url 'todo_create' day='wed' %}",
            type: 'get',
            dataType: 'json',
            beforeSend: function () {
                $("#modal-todo-wed").modal("show");
            },
            success: function (data) {
                $("#modal-todo-wed .modal-content").html(data.html_form);
            }
        });
    });
    $("#modal-todo-wed").on("submit", ".js-todo-create-form", function () {

        var form = $(this);

        $.ajax({
            url: form.attr("action"),
            data: form.serialize(),
            type: form.attr("method"),
            dataType: 'json',
            success: function (data) {
                if (data.form_is_valid) {
                    $("#todo-table-wed tbody").html(data.html_todo_list);
                    $("#modal-todo-wed").modal("hide");
                }
                else {
                    alert('data is not valid')
                    $("#modal-todo-wed .modal-content").html(data.html_form);
                }
            }
        });
        return false;
    });

    // 목요일
     $(".js-create-todo-thu").click(function () {
        $.ajax({
            url: "{% url 'todo_create' day='thu' %}",
            type: 'get',
            dataType: 'json',
            beforeSend: function () {
                $("#modal-todo-thu").modal("show");
            },
            success: function (data) {
                $("#modal-todo-thu .modal-content").html(data.html_form);
            }
        });
    });
    $("#modal-todo-thu").on("submit", ".js-todo-create-form", function () {

        var form = $(this);

        $.ajax({
            url: form.attr("action"),
            data: form.serialize(),
            type: form.attr("method"),
            dataType: 'json',
            success: function (data) {
                if (data.form_is_valid) {
                    $("#todo-table-thu tbody").html(data.html_todo_list);
                    $("#modal-todo-thu").modal("hide");
                }
                else {
                    alert('data is not valid')
                    $("#modal-todo-thu .modal-content").html(data.html_form);
                }
            }
        });
        return false;
    });
</script>
<!--**********************************
     javascript end
***********************************-->
{% endblock %}